(()=>{"use strict";var e={51:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.StorageService=void 0;class a{static isDatabase(e){if(!e||"object"!=typeof e)return!1;if(!("list"in e)||!("lastId"in e))return!1;const{list:t,lastId:o}=e;return!(!Array.isArray(t)||"number"!=typeof o)}}t.StorageService=a,o=a,a.data={list:[{id:"#1",title:"",weight:""}],lastId:1},a.saveData=e=>{localStorage.setItem("decisionList",JSON.stringify(e))},a.getData=()=>{const e=localStorage.getItem("decisionList");if(e){const t=JSON.parse(e);if(!o.isDatabase(t))throw new Error("Data in localStorage is not of type Database");o.data=t}}},85:(e,t,o)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;const n=o(51),i=o(987),s=o(130),r=o(688),d=o(310);class l{}t.Modal=l,a=l,l.textareaNode=new s.BaseComponent("textarea","textarea").getNode(),l.formNode=new s.BaseComponent("container","form").getNode(),l.textarea=()=>(a.textareaNode instanceof HTMLTextAreaElement&&(a.textareaNode.rows=12,a.textareaNode.cols=64,a.textareaNode.placeholder="Paste a list of new options in a CSV-like format"),a.textareaNode),l.cancel=()=>{const e=new s.BaseComponent(["button","cancel"],"button","Cancel");return a.closeDialog(e),e.getNode()},l.confirm=()=>{const e=new s.BaseComponent(["button","confirm"],"button","Confirm");return e.getNode().addEventListener("click",(()=>{if(a.formNode instanceof HTMLFormElement&&a.formNode.elements[0]instanceof HTMLTextAreaElement){const e=a.formNode.elements[0].value.split("\n").filter(Boolean).map((e=>e.trim())).map((e=>e.split(","))).map((e=>{if(e.length>2){const t=e.at(-1);return[e.slice(0,-1).join(","),t]}return e})).map((e=>e.map((e=>null==e?void 0:e.trim())))).filter((e=>Number(e[1])));n.StorageService.getData();const t=e.map(((e,t)=>e[0]&&e[1]?{id:`#${n.StorageService.data.lastId+t+1}`,title:e[0],weight:e[1]}:e)),o={list:[...n.StorageService.data.list,...t],lastId:n.StorageService.data.lastId+t.length};n.StorageService.isDatabase(o)&&(n.StorageService.data=i.Utils.sortById(o),n.StorageService.saveData(i.Utils.sortById(o)),d.Options.replaceChildren(),a.formNode.elements[0].value="")}})),a.closeDialog(e),e.getNode()},l.form=()=>(a.formNode.append(a.textarea(),a.cancel(),a.confirm()),a.formNode),l.dialog=()=>(r.Nodes.dialogNode.append(a.form()),r.Nodes.dialogNode.addEventListener("click",(e=>{e.target===r.Nodes.dialogNode&&r.Nodes.dialogNode instanceof HTMLDialogElement&&r.Nodes.dialogNode.close()})),r.Nodes.dialogNode),l.closeDialog=e=>{e.getNode().addEventListener("click",(e=>{e.target&&e.target instanceof HTMLButtonElement&&r.Nodes.dialogNode instanceof HTMLDialogElement&&(e.stopPropagation(),e.preventDefault(),r.Nodes.dialogNode.close())}))}},114:(e,t,o)=>{o.r(t)},130:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e,t="div",o=""){this.getAttribute=e=>this.node.getAttribute(e),this.node=document.createElement(t),"string"==typeof e?this.node.classList.add(e):this.node.classList.add(...e),this.node.textContent=o}getNode(){return this.node}addContent(e){this.node.textContent=e}addClass(e){this.node.classList.add(e)}toggleClass(e){this.node.classList.toggle(e)}removeClass(e){this.node.classList.remove(e)}destroyNode(){this.node.remove()}setAttributeOptions(e,t){this.node.setAttribute(e,`option${t}`)}setAttributes(e){Object.keys(e).forEach((t=>this.node.setAttribute(t,e[t])))}}},310:(e,t,o)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Options=void 0;const n=o(51),i=o(987),s=o(130),r=o(688);class d{}t.Options=d,a=d,d.list=()=>(n.StorageService.getData(),r.Nodes.childrenList=n.StorageService.data.list.map((e=>a.li(e.id,e.title,e.weight))),r.Nodes.listNode.append(...r.Nodes.childrenList),r.Nodes.listNode),d.label=e=>{const t=new s.BaseComponent("label","label",e);return t.setAttributes({for:`option-${e}`}),t.getNode()},d.inputTitle=(e,t="")=>{const o=new s.BaseComponent("title","input");return o.setAttributes({id:`option-${e}`,placeholder:"Title",value:t}),o.getNode().addEventListener("input",(e=>{if(e.target instanceof HTMLInputElement){const t=o.getAttribute("id");if(t){const o=t.split("option-").pop(),a=n.StorageService.data.list.find((e=>e.id===o));if(a){a.title=e.target.value;const t={list:[...n.StorageService.data.list.filter((e=>e.id!==o)),a],lastId:n.StorageService.data.lastId};n.StorageService.saveData(i.Utils.sortById(t))}}}})),o.getNode()},d.inputWeight=(e,t="")=>{const o=new s.BaseComponent("weight","input");return o.setAttributes({id:`option-${e}`,placeholder:"Weight",type:"number",value:t}),o.getNode().addEventListener("input",(e=>{if(e.target instanceof HTMLInputElement){const t=o.getAttribute("id");if(t){const o=t.split("option-").pop(),a=n.StorageService.data.list.find((e=>e.id===o));if(a){a.weight=e.target.value;const t={list:[...n.StorageService.data.list.filter((e=>e.id!==o)),a],lastId:n.StorageService.data.lastId};n.StorageService.saveData(i.Utils.sortById(t))}}}})),o.getNode()},d.buttonDelete=e=>{const t=new s.BaseComponent("button","button","Delete");return t.setAttributes({id:`option-${e}`,type:"button"}),t.getNode().addEventListener("click",(e=>{var t;if(e.target&&e.target instanceof HTMLButtonElement){e.stopPropagation(),e.preventDefault();const o=e.target.getAttribute("id");if(o){const a=o.split("option-").pop(),s={list:n.StorageService.data.list.filter((e=>e.id!==a)),lastId:n.StorageService.data.lastId};n.StorageService.data=i.Utils.sortById(s),n.StorageService.saveData(i.Utils.sortById(s)),null===(t=e.target.parentElement)||void 0===t||t.remove()}}})),t.getNode()},d.addOptionButton=()=>{const e=new s.BaseComponent("button","button","Add Option");return e.getNode().addEventListener("click",(e=>{if(e.target&&e.target instanceof HTMLButtonElement){e.stopPropagation(),e.preventDefault();const t=n.StorageService.data.lastId+1;n.StorageService.data.list.push({id:`#${t}`,title:"",weight:""});const o={list:n.StorageService.data.list,lastId:t};n.StorageService.data=i.Utils.sortById(o),n.StorageService.saveData(i.Utils.sortById(o)),r.Nodes.listNode.append(a.li(`#${t}`))}})),e.getNode()},d.li=(e,t="",o="")=>{const n=new s.BaseComponent("option","li");return n.getNode().append(a.label(e),a.inputTitle(e,t),a.inputWeight(e,o),a.buttonDelete(e)),n.getNode()},d.loadListButton=()=>{const e=new s.BaseComponent(["button","wrapper-button"],"button","Load list from file");return e.getNode().addEventListener("click",(e=>{e.target&&e.target instanceof HTMLButtonElement&&(e.stopPropagation(),e.preventDefault(),r.Nodes.loadInputNode.click())})),e.getNode()},d.loadInput=()=>(r.Nodes.loadInputNode.hidden=!0,r.Nodes.loadInputNode.setAttribute("type","file"),r.Nodes.loadInputNode.setAttribute("accept",".json"),r.Nodes.loadInputNode.addEventListener("change",(e=>{if(e.target&&e.target instanceof HTMLInputElement){e.stopPropagation();const t=e.target;if(!t.files||0===t.files.length)throw new Error("File not selected");const o=t.files[0],s=new FileReader;s.addEventListener("load",(e=>{try{let t="";if("string"!=typeof t)throw new TypeError("Unsupported file format");e.target&&"string"==typeof e.target.result&&(t=JSON.parse(e.target.result)),n.StorageService.isDatabase(t)&&(n.StorageService.data=i.Utils.sortById(t),n.StorageService.saveData(i.Utils.sortById(t)),a.replaceChildren())}catch(e){if("string"==typeof e)throw new TypeError(e.toUpperCase());if(e instanceof Error)throw new TypeError(e.message)}})),s.readAsText(o,"ascii")}})),r.Nodes.loadInputNode),d.saveListButton=()=>{const e=new s.BaseComponent(["button","wrapper-button"],"button","Save list to file");return e.getNode().addEventListener("click",(e=>{if(e.target&&e.target instanceof HTMLButtonElement){e.stopPropagation(),e.preventDefault(),n.StorageService.getData();const t=JSON.stringify(n.StorageService.data,void 0,2),o=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="option-list",document.body.append(i),i.click(),i.remove(),URL.revokeObjectURL(a)}})),e.getNode()},d.wrapper=()=>{const e=new s.BaseComponent("wrapper","div");return e.getNode().append(a.saveListButton(),a.loadListButton(),a.loadInput()),e.getNode()},d.replaceChildren=()=>{r.Nodes.listNode.replaceChildren(),r.Nodes.childrenList=n.StorageService.data.list.map((e=>a.li(e.id,e.title,e.weight))),r.Nodes.listNode.append(...r.Nodes.childrenList)}},437:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecisionPicker=void 0;const a=o(130),n=o(688);class i{}t.DecisionPicker=i,i.start=()=>{const e=new a.BaseComponent("tag","div","DecisionPicker").getNode();n.Nodes.main.append(e)}},514:(e,t,o)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.NotFound=void 0;const n=o(130),i=o(688);class s{}t.NotFound=s,a=s,s.h1=new n.BaseComponent("heading","h1","Oops! Something went wrong").getNode(),s.start=()=>{i.Nodes.main.append(a.h1,i.Nodes.backButtonNode)}},593:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buttons=void 0;const a=o(51),n=o(130),i=o(688);class s{}t.Buttons=s,s.pasteListButton=()=>{const e=new n.BaseComponent("button","button","Paste list");return e.getNode().addEventListener("click",(e=>{e.target&&i.Nodes.dialogNode instanceof HTMLDialogElement&&(e.stopPropagation(),e.preventDefault(),i.Nodes.dialogNode.showModal())})),e.getNode()},s.clearListButton=()=>{const e=new n.BaseComponent("button","button","Clear list");return e.getNode().addEventListener("click",(e=>{if(e.target&&e.target instanceof HTMLButtonElement){e.stopPropagation(),e.preventDefault();const t={list:[],lastId:0};a.StorageService.data=t,a.StorageService.saveData(t),i.Nodes.listNode.replaceChildren()}})),e.getNode()}},688:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Nodes=void 0;const a=o(130);class n{}t.Nodes=n,n.dialogNode=new a.BaseComponent("dialog","dialog").getNode(),n.childrenList=[],n.listNode=new a.BaseComponent("list","ul").getNode(),n.loadInputNode=new a.BaseComponent("input","input").getNode(),n.main=new a.BaseComponent("main","div").getNode(),n.h1=new a.BaseComponent("heading","h1","Decision Making Tool").getNode(),n.startButtonNode=new a.BaseComponent("button","button","Start").getNode(),n.backButtonNode=new a.BaseComponent("button","button","Back to main").getNode()},835:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ListOfOptions=void 0;const a=o(593),n=o(85),i=o(310),s=o(688);class r{}t.ListOfOptions=r,r.start=()=>{s.Nodes.main.append(s.Nodes.h1,i.Options.list(),i.Options.addOptionButton(),a.Buttons.pasteListButton(),a.Buttons.clearListButton(),i.Options.wrapper(),s.Nodes.startButtonNode,n.Modal.dialog())}},869:(e,t,o)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const n=o(835),i=o(688),s=o(437),r=o(514);class d{}t.Router=d,a=d,d.routes=[{path:"/"},{path:"/decision-picker"}],d.loadInitialRoute=()=>{const e=globalThis.location.pathname;a.navigateTo(e,!0)},d.setupEventListeners=()=>{globalThis.addEventListener("popstate",(e=>{const t=e.state;"object"==typeof t&&"currentPath"in t&&"previousPath"in t&&t&&"string"==typeof t.previousPath&&"string"==typeof t.currentPath&&a.renderRoute(t.currentPath)})),i.Nodes.startButtonNode.addEventListener("click",(e=>{e.target instanceof HTMLButtonElement&&(e.preventDefault(),a.navigateTo("/decision-picker"))})),i.Nodes.backButtonNode.addEventListener("click",(e=>{e.target instanceof HTMLButtonElement&&(e.preventDefault(),a.navigateTo("/",!0))}))},d.navigateTo=(e,t=!1)=>{const o={currentPath:e,previousPath:globalThis.location.pathname};t?globalThis.history.replaceState(o,"",e):globalThis.history.pushState(o,"",e),a.renderRoute(e)},d.findRoute=e=>a.routes.find((t=>t.path===e))||void 0,d.renderRoute=e=>{const t=a.findRoute(e);"/"===(null==t?void 0:t.path)?(i.Nodes.main.replaceChildren(),n.ListOfOptions.start()):"/decision-picker"===(null==t?void 0:t.path)?(i.Nodes.main.replaceChildren(),s.DecisionPicker.start()):(i.Nodes.main.replaceChildren(),r.NotFound.start())},d.start=()=>{a.setupEventListeners(),a.loadInitialRoute()}},987:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0,t.Utils=class{static sortById(e){return e.list.sort(((e,t)=>Number(e.id.split("#").pop())-Number(t.id.split("#").pop()))),e}}}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,o),i.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=o(688);o(114);const t=o(869);document.addEventListener("DOMContentLoaded",(()=>{document.body.append(e.Nodes.main),t.Router.start()}))})()})();